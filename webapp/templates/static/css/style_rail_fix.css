/* ===== Material 3 · base (original + extras) ===== */
:root{
  --maxw: 1280px;
  --radius-lg: 24px;
  --gap: 16px;
  --elev: 0 14px 40px rgba(0,0,0,.14);
}

body.m3-body{
  margin:0;
  font-family:"Roboto Flex",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  background:linear-gradient(180deg,#faf7fb 0%,#ffffff 18%,#fafafa 100%);
  color:rgb(33 33 33);
  letter-spacing:.2px;
}

/* App bar (ya no se usa: se oculta) */
.appbar{ display:none !important; }

.brand-wrap{ display:flex; align-items:center; gap:.5rem; padding-inline:.25rem; }
.brand-logo{ width:32px; height:32px; border-radius:10px; object-fit:contain; }
.brand-title{ font-weight:800; letter-spacing:.3px; }

/* Layout */
.container{ max-width:var(--maxw); margin-inline:auto; padding:28px 18px; }
.section{ padding:52px 0; }

.section-head{ margin:0; }
.display{ font-size:clamp(36px,6vw,64px); line-height:1.02; font-weight:800; margin:0 0 6px; }
.title{ font-size:clamp(22px,2.2vw,32px); line-height:1.05; font-weight:800; margin:0; }
.body{ margin:0; opacity:.85; }

/* Hero */
.hero-grid{ display:grid; grid-template-columns:1.05fr .95fr; gap:var(--gap); align-items:center; }
.hero-copy-card{ padding:20px; border-radius:var(--radius-lg); }
.hero-card{ width:100%; min-height:420px; display:grid; place-items:center; overflow:hidden; border-radius:var(--radius-lg); }
.hero-card img{ width:100%; height:100%; object-fit:cover; transform:scale(1.02); }

/* Section header card */
.section-head-card{ margin-bottom:calc(var(--gap) + 4px); padding:14px 16px; border-radius:var(--radius-lg); }

/* Micro-cards grid */
.section-grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:var(--gap); }
.micro-card{
  padding:16px;
  border-radius:var(--radius-lg);
  outline:1px solid color-mix(in oklab, var(--md-sys-color-outline, #000), transparent 70%);
  background:color-mix(in oklab, var(--md-sys-color-surface, #fff), var(--md-sys-color-primary, #6750A4) 2%);
  transition:transform .18s ease, box-shadow .18s ease, outline-color .18s ease, background .18s ease;
  display:grid; gap:6px;
}
.micro-card:hover{
  transform:translateY(-4px);
  box-shadow:var(--elev);
  outline-color:color-mix(in oklab, var(--md-sys-color-primary, #6750A4), transparent 60%);
  background:color-mix(in oklab, var(--md-sys-color-surface, #fff), var(--md-sys-color-primary, #6750A4) 4%);
}
.micro-head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
.micro-title{ margin:0; font-weight:800; font-size:clamp(16px,1.7vw,22px); }
.micro-text{ margin:6px 0 0; opacity:.9; }

/* Spans (12 columns) */
.span-2{ grid-column:span 2 / span 2; }
.span-3{ grid-column:span 3 / span 3; }
.span-4{ grid-column:span 4 / span 4; }
.span-8{ grid-column:span 8 / span 8; }
.span-12{ grid-column: span 12 / span 12; }

/* Charts & results */
.micro-card canvas{ width:100%; height:auto; }
.upload-card{ padding:12px; border-radius:var(--radius-lg); }
.upload-form{ display:grid; gap:8px; }
.status{ min-height:20px; font-size:.95rem; opacity:.9; }

.results-grid{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px; margin-top:10px; }
.thumb{ padding:14px; border-radius:var(--radius-lg); }
.thumb h4{ margin:0 0 6px; font-weight:700; }
.thumb img{ width:100%; height:360px; object-fit:contain; background:#fff; border-radius:14px; }

.pred-card{ margin-top:12px; padding:10px; }
.pred-head{ display:flex; align-items:center; justify-content:space-between; }
.pred-list{ list-style:none; padding-left:0; margin:6px 0 0; display:grid; gap:6px; }
.pred-list li{
  background:color-mix(in oklab, var(--md-sys-color-surface,#fff), var(--md-sys-color-primary,#6750A4) 6%);
  border-radius:10px; padding:8px 10px; border:1px solid rgba(0,0,0,.06);
}

/* ===== Left rail (vertical navbar) ===== */
.side-nav{
  position: fixed; inset: 0 auto 0 0;
  width: 88px;                       /* rail compacto estilo M3 */
  background: color-mix(in oklab, var(--md-sys-color-surface, #fff), transparent 0%);
  border-right: 1px solid color-mix(in oklab, var(--md-sys-color-outline, #000), transparent 84%);
  padding: 12px 8px;
  display: flex; flex-direction: column; gap: 8px;
  z-index: 60;
}
.with-rail{ margin-left: 88px; }

.side-nav .nav-item{
  display: grid;
  grid-template-rows: 40px auto;
  place-items: center;
  gap: 4px;
  padding: 6px 8px;
  border-radius: 14px;
  text-decoration: none;
  color: inherit;
  font-weight: 600;
  font-size: 11.5px;
  line-height: 1.1;
  opacity: .95;
  transition: background .18s ease, color .18s ease, transform .12s ease, box-shadow .18s ease;
}
.side-nav .nav-item md-icon{ font-size: 24px; }
.side-nav .nav-item:hover{
  background: color-mix(in oklab, var(--md-sys-color-primary, #6750A4), transparent 88%);
}
.side-nav .nav-item.active{
  background: color-mix(in oklab, var(--md-sys-color-primary, #6750A4), transparent 80%);
  box-shadow: var(--elev, 0 14px 40px rgba(0,0,0,.14));
}

/* Botón "fantasma" (para el switch de tema) */
.side-nav .nav-item.ghost{
  background: transparent;
  border: none;
  cursor: pointer;
}
.side-nav .nav-spacer{ flex: 1 1 auto; }

/* Modo oscuro */
:root[data-theme="dark"] .side-nav{
  background: #151217;
  border-right-color: rgba(255,255,255,.08);
}
:root[data-theme="dark"] .side-nav .nav-item:hover{
  background: color-mix(in oklab, var(--md-sys-color-primary, #9a82db), transparent 84%);
}
:root[data-theme="dark"] .side-nav .nav-item.active{
  background: color-mix(in oklab, var(--md-sys-color-primary, #9a82db), transparent 78%);
}

/* Responsivo: el rail se vuelve barra superior */
@media (max-width: 820px){
  .side-nav{
    position: sticky; top: 0; inset: auto;
    width: 100%; height: auto;
    border-right: none; border-bottom: 1px solid rgba(0,0,0,.08);
    flex-direction: row; align-items: center; justify-content: space-between;
    padding: 6px 8px; gap: 6px; background: var(--md-sys-color-surface, #fff);
  }
  .side-nav .nav-item{ grid-template-rows: 1fr; grid-auto-flow: column; grid-auto-columns: min-content; gap: 6px; padding: 8px 10px; border-radius: 12px; }
  .side-nav .nav-item span{ font-size: 13px; }
  .with-rail{ margin-left: 0; }
}

/* Reveal on scroll */
@keyframes revealUp { from { opacity:0; transform: translateY(10px) scale(.985); } to { opacity:1; transform:none; } }
[data-reveal]{ opacity:0; transform: translateY(10px) scale(.985); }
[data-reveal].seen{ animation: revealUp .42s cubic-bezier(.2,.8,.2,1) forwards; }

/* Dark theme general */
:root[data-theme="dark"] body.m3-body{
  background:
    radial-gradient(900px 520px at 8% -10%, #2b2333 0%, transparent 62%),
    radial-gradient(980px 520px at 95% 12%, #352542 0%, transparent 60%),
    #121013;
  color:#f4effa;
}



/* === Left Rail (additive; no changes to existing styles) === */
body.use-rail .appbar{ display:none; } /* solo esconder topbar si activas la clase use-rail en <body> */

.side-nav{
  position: fixed; inset: 0 auto 0 0;
  width: 88px;
  background: color-mix(in oklab, var(--md-sys-color-surface, #fff), transparent 0%);
  border-right: 1px solid color-mix(in oklab, var(--md-sys-color-outline, #000), transparent 84%);
  padding: 12px 8px;
  display: flex; flex-direction: column; gap: 8px;
  z-index: 60;
}
.with-rail{ margin-left: 88px; }

.side-nav .nav-item{
  display: grid;
  grid-template-rows: 40px auto;
  place-items: center;
  gap: 4px;
  padding: 6px 8px;
  border-radius: 14px;
  text-decoration: none;
  color: inherit;
  font-weight: 600;
  font-size: 11.5px;
  line-height: 1.1;
  opacity: .95;
  transition: background .18s ease, color .18s ease, transform .12s ease, box-shadow .18s ease;
}
.side-nav .nav-item md-icon{ font-size: 24px; }
.side-nav .nav-item:hover{
  background: color-mix(in oklab, var(--md-sys-color-primary, #6750A4), transparent 88%);
}
.side-nav .nav-item.active{
  background: color-mix(in oklab, var(--md-sys-color-primary, #6750A4), transparent 80%);
  box-shadow: 0 14px 40px rgba(0,0,0,.14);
}
.side-nav .nav-spacer{ flex: 1 1 auto; }
.side-nav .nav-item.ghost{ background: transparent; border: none; cursor: pointer; }

/* Dark mode */
:root[data-theme="dark"] .side-nav{
  background: #151217;
  border-right-color: rgba(255,255,255,.08);
}
:root[data-theme="dark"] .side-nav .nav-item:hover{
  background: color-mix(in oklab, var(--md-sys-color-primary, #9a82db), transparent 84%);
}
:root[data-theme="dark"] .side-nav .nav-item.active{
  background: color-mix(in oklab, var(--md-sys-color-primary, #9a82db), transparent 78%);
}

/* Responsive: rail -> topbar compacta solo en móviles */
@media (max-width: 820px){
  .side-nav{
    position: sticky; top: 0; inset: auto;
    width: 100%; height: auto;
    border-right: none; border-bottom: 1px solid rgba(0,0,0,.08);
    flex-direction: row; align-items: center; justify-content: space-between;
    padding: 6px 8px; gap: 6px; background: var(--md-sys-color-surface, #fff);
  }
  .side-nav .nav-item{ grid-template-rows: 1fr; grid-auto-flow: column; grid-auto-columns: min-content; gap: 6px; padding: 8px 10px; border-radius: 12px; }
  .side-nav .nav-item span{ font-size: 13px; }
  .with-rail{ margin-left: 0; }
}
